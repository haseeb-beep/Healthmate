<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HealthMate - Your Partner in Need</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <nav class="navbar navbar-expand-lg fixed-top shadow-sm">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="#" onclick="showPage('landing-page')">
                <img src="logo1.jpg" alt="HealthMate Logo" height="45" class="me-2">
                <span class="fw-bold text-teal brand-text">HealthMate</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto align-items-center">
                    <li class="nav-item auth-hidden"><a class="nav-link" href="#features">Features</a></li>
                    
                    <li class="nav-item auth-hidden ms-2">
                        <button class="btn btn-outline-teal me-2 px-4" onclick="showAuth('login')">Login</button>
                    </li>
                    <li class="nav-item auth-hidden">
                        <button class="btn btn-teal px-4" onclick="showAuth('signup')">Sign Up</button>
                    </li>

                    <li class="nav-item auth-visible d-none">
                        <span class="me-3 fw-medium text-navy bg-white px-3 py-1 rounded shadow-sm" id="navUserDisplay"></span>
                        <button class="btn btn-sm btn-danger shadow-sm" onclick="logout()">Logout</button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <main class="container-fluid p-0 mt-5 pt-4">

        <section id="landing-page" class="view-section">
            <div class="hero-wrap d-flex align-items-center justify-content-center text-center">
                <div class="glass-card p-5 animate-up">
                    <h1 class="display-4 fw-bold text-navy mb-3">Your Partner in Need</h1>
                    <p class="lead text-dark mb-4">A complete digital health ecosystem connecting patients, doctors, and administrators seamlessly.</p>
                    <button class="btn btn-lg btn-teal px-5 rounded-pill shadow" onclick="showAuth('signup')">Get Started Now</button>
                </div>
            </div>
            
            <div class="container py-5" id="features">
                <div class="row g-4 text-center">
                    <div class="col-md-4">
                        <div class="feature-card p-4 h-100">
                            <div class="icon-circle mb-3"><i class="bi bi-calendar-check text-white"></i></div>
                            <h5>Easy Scheduling</h5>
                            <p class="text-muted">Book appointments with top specialists in seconds.</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="feature-card p-4 h-100">
                            <div class="icon-circle mb-3"><i class="bi bi-file-medical text-white"></i></div>
                            <h5>Digital Records</h5>
                            <p class="text-muted">Access your prescriptions and lab reports anywhere.</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="feature-card p-4 h-100">
                            <div class="icon-circle mb-3"><i class="bi bi-shield-lock text-white"></i></div>
                            <h5>Secure Data</h5>
                            <p class="text-muted">Your health data is encrypted and private.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="auth-page" class="view-section d-none">
            <div class="d-flex justify-content-center align-items-center min-vh-100 py-5">
                <div class="card border-0 shadow-lg p-4 auth-card glass-panel">
                    <div class="text-center mb-4">
                        <img src="logo1.jpg" height="50" class="mb-2">
                        <h3 class="text-navy fw-bold" id="authTitle">Welcome Back</h3>
                    </div>
                    
                    <form id="authForm">
                        <div id="signupFields" class="d-none animate-fade">
                            <div class="mb-3">
                                <label class="form-label">Full Name</label>
                                <input type="text" class="form-control" id="authName" placeholder="John Doe">
                            </div>
                            <div class="mb-3">
                                <label class="form-label">I am a:</label>
                                <select class="form-select" id="authRole">
                                    <option value="patient">Patient</option>
                                    <option value="doctor">Doctor</option>
                                </select>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Username / Email</label>
                            <input type="text" class="form-control" id="authEmail" required placeholder="Enter username">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Password</label>
                            <input type="password" class="form-control" id="authPass" required placeholder="••••••">
                        </div>
                        
                        <button type="submit" class="btn btn-teal w-100 py-2 mt-2 fw-bold shadow-sm" id="authSubmitBtn">Login</button>
                    </form>
                    
                    <div class="text-center mt-3">
                        <a href="#" class="text-navy fw-bold small text-decoration-none" id="authToggle">Create an account</a>
                    </div>
                </div>
            </div>
        </section>

        <section id="patient-dashboard" class="view-section d-none container py-5">
            <div class="glass-panel p-4 rounded-4 mb-4 animate-up">
                <div class="d-flex justify-content-between align-items-center">
                    <h2 class="text-navy mb-0">My Health Dashboard</h2>
                    <button class="btn btn-teal shadow-sm" data-bs-toggle="modal" data-bs-target="#bookApptModal">+ Book Appointment</button>
                </div>
            </div>
            
            <div class="row g-4 mb-4">
                <div class="col-md-4">
                    <div class="info-card bg-teal-gradient text-white p-4 h-100 rounded-4 shadow">
                        <h5><i class="bi bi-calendar-event me-2"></i>Next Appointment</h5>
                        <h3 class="fw-bold mt-2" id="patNextAppt">None</h3>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="info-card bg-white text-navy p-4 h-100 rounded-4 shadow-sm border-start border-4 border-info">
                        <h5><i class="bi bi-heart-pulse me-2 text-danger"></i>Latest Vitals</h5>
                        <p class="display-6 fw-bold mb-0 text-dark" id="patBP">--/--</p>
                        <small class="text-muted">Blood Pressure</small>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="info-card bg-white text-navy p-4 h-100 rounded-4 shadow-sm border-start border-4 border-warning">
                        <h5><i class="bi bi-capsule me-2 text-warning"></i>Status</h5>
                        <p class="mt-2 text-muted" id="patHistoryText">No active conditions.</p>
                    </div>
                </div>
            </div>

            <div class="glass-panel p-3 rounded-4 shadow-sm">
                <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
                    <li class="nav-item"><button class="nav-link active" data-bs-toggle="pill" data-bs-target="#p-appointments">Appointments</button></li>
                    <li class="nav-item"><button class="nav-link" data-bs-toggle="pill" data-bs-target="#p-prescriptions">Prescriptions</button></li>
                </ul>
                
                <div class="tab-content" id="pills-tabContent">
                    <div class="tab-pane fade show active" id="p-appointments">
                        <div class="table-responsive">
                            <table class="table table-hover align-middle">
                                <thead class="table-light"><tr><th>Date</th><th>Doctor</th><th>Status</th></tr></thead>
                                <tbody id="patApptTable"></tbody>
                            </table>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="p-prescriptions">
                        <div class="list-group list-group-flush" id="patPrescList"></div>
                    </div>
                </div>
            </div>
        </section>

        <section id="doctor-dashboard" class="view-section d-none container py-5">
            <div class="glass-panel p-4 rounded-4 mb-4">
                <h2 class="text-navy">Doctor's Console</h2>
                <p class="text-muted">Manage your daily schedule and patient records.</p>
            </div>
            
            <div class="row g-4">
                <div class="col-md-4">
                    <div class="card border-0 shadow-sm h-100 rounded-4 overflow-hidden">
                        <div class="card-header bg-navy text-white fw-bold py-3">Today's Appointments</div>
                        
                        <div class="p-3 border-bottom">
                            <input type="text" class="form-control form-control-sm" id="docApptSearch" placeholder="Filter by Patient Name..." onkeyup="filterDoctorAppointments()">
                        </div>
                        
                        <div class="list-group list-group-flush" id="docApptList">
                            </div>
                    </div>
                </div>

                <div class="col-md-8">
                    <div class="card border-0 shadow-lg h-100 rounded-4" id="docPatientView" style="display:none;">
                        <div class="card-header bg-white border-bottom p-3">
                            <div class="d-flex justify-content-between align-items-center">
                                <h4 class="text-navy mb-0" id="docPatName">Patient Name</h4>
                                <span class="badge bg-mint text-navy px-3 py-2 rounded-pill">Active Session</span>
                            </div>
                        </div>
                        <div class="card-body p-4">
                            <form id="diagnosisForm">
                                <div class="row g-3 mb-3">
                                    <div class="col-md-6">
                                        <label class="form-label text-muted">Blood Pressure</label>
                                        <div class="input-group">
                                            <span class="input-group-text bg-light"><i class="bi bi-heart-pulse"></i></span>
                                            <input type="text" class="form-control" id="diagBP" placeholder="120/80">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label text-muted">Weight (kg)</label>
                                        <input type="number" class="form-control" id="diagWeight">
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label text-muted">Diagnosis Notes</label>
                                    <textarea class="form-control" id="diagNotes" rows="3" required></textarea>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label text-muted">Prescription</label>
                                    <textarea class="form-control bg-light" id="diagPresc" rows="3" placeholder="Rx details..."></textarea>
                                </div>
                                <button type="button" class="btn btn-teal w-100 py-2 shadow-sm" onclick="saveDiagnosis()">
                                    <i class="bi bi-check-circle-fill me-2"></i>Complete Appointment
                                </button>
                            </form>
                            
                            <hr class="my-4">
                            <h6 class="text-muted">Patient History</h6>
                            <ul id="docPatHistoryList" class="list-group list-group-flush small bg-light rounded"></ul>
                        </div>
                    </div>
                    
                    <div class="text-center text-muted mt-5 animate-pulse" id="docSelectPrompt">
                        <i class="bi bi-person-rolodex fs-1 text-teal opacity-50"></i>
                        <p class="mt-3">Select a patient from the list to start consultation.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="admin-dashboard" class="view-section d-none container py-5">
            <div class="glass-panel p-4 rounded-4 mb-4">
                <h2 class="text-navy">Clinic Administration</h2>
            </div>
            
            <div class="row g-4 mb-4">
                <div class="col-md-4"><div class="stat-card bg-white p-4 rounded-4 shadow-sm text-center">
                    <i class="bi bi-people fs-1 text-teal mb-2"></i>
                    <h2 class="fw-bold" id="statPat">0</h2><span class="text-muted">Total Patients</span>
                </div></div>
                <div class="col-md-4"><div class="stat-card bg-white p-4 rounded-4 shadow-sm text-center">
                    <i class="bi bi-person-badge fs-1 text-navy mb-2"></i>
                    <h2 class="fw-bold" id="statDoc">0</h2><span class="text-muted">Active Doctors</span>
                </div></div>
                <div class="col-md-4"><div class="stat-card bg-white p-4 rounded-4 shadow-sm text-center">
                    <i class="bi bi-calendar-check fs-1 text-warning mb-2"></i>
                    <h2 class="fw-bold" id="statAppt">0</h2><span class="text-muted">Appointments</span>
                </div></div>
            </div>

            <div class="card border-0 shadow-sm rounded-4 p-4">
                <div class="d-flex justify-content-between mb-4 align-items-center">
                    <h5 class="text-navy mb-0">Doctor Registry</h5>
                    <button class="btn btn-teal shadow-sm" data-bs-toggle="modal" data-bs-target="#addDocModal">
                        <i class="bi bi-plus-lg me-1"></i> Add Doctor
                    </button>
                </div>
                
                <div class="mb-3">
                    <input type="text" class="form-control" id="adminDocSearch" placeholder="Filter by Name or Specialty..." onkeyup="filterAdminDoctors()">
                </div>
                
                <div class="table-responsive">
                    <table class="table align-middle">
                        <thead class="table-light"><tr><th>Name</th><th>Specialty</th><th>Status</th><th>Action</th></tr></thead>
                        <tbody id="adminDocTable"></tbody>
                    </table>
                </div>
            </div>
        </section>

    </main>

    <div class="modal fade" id="bookApptModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content border-0 shadow-lg rounded-4">
                <div class="modal-header bg-teal text-white border-0">
                    <h5 class="modal-title">Book New Appointment</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body p-4">
                    <form id="bookApptForm">
                        <div class="mb-3">
                            <label class="fw-bold mb-1">Select Specialist</label>
                            <select id="bookDocSelect" class="form-select bg-light" required></select>
                        </div>
                        <div class="mb-3">
                            <label class="fw-bold mb-1">Preferred Date</label>
                            <input type="date" id="bookDate" class="form-control bg-light" required>
                        </div>
                        <button type="submit" class="btn btn-navy w-100 py-2 shadow-sm">Confirm Booking</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="addDocModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content border-0 shadow-lg rounded-4">
                <div class="modal-header bg-navy text-white border-0">
                    <h5 class="modal-title">Register New Doctor</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body p-4">
                    <form id="addDocForm">
                        <input type="text" id="newDocName" class="form-control mb-3" placeholder="Doctor's Name" required>
                        <input type="text" id="newDocSpec" class="form-control mb-3" placeholder="Specialization (e.g. Neurology)" required>
                        <hr>
                        <input type="text" id="newDocUser" class="form-control mb-3" placeholder="Set Username" required>
                        <input type="password" id="newDocPass" class="form-control mb-3" placeholder="Set Password" required>
                        <button type="submit" class="btn btn-teal w-100 shadow-sm">Create Account</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
</body>
</html>